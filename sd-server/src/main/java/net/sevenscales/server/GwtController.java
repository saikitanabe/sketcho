package net.sevenscales.server;import java.io.IOException;import javax.servlet.ServletContext;import javax.servlet.ServletException;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import org.acegisecurity.intercept.method.aopalliance.MethodSecurityInterceptor;import org.springframework.web.context.ServletContextAware;import org.springframework.web.servlet.ModelAndView;import org.springframework.web.servlet.mvc.Controller;import com.google.gwt.user.server.rpc.RemoteServiceServlet;public abstract class GwtController extends RemoteServiceServlet         implements Controller, ServletContextAware {    protected ServletContext servletContext;     private MethodSecurityInterceptor methodSecurityInterceptor;        @Override     public ServletContext getServletContext() {       return servletContext;     }    public void setServletContext(ServletContext servletContext) {       this.servletContext = servletContext;     }        public void setMethodSecurityInterceptor(        MethodSecurityInterceptor methodSecurityInterceptor) {      this.methodSecurityInterceptor = methodSecurityInterceptor;    }        public ModelAndView handleRequest(HttpServletRequest request,        HttpServletResponse response) throws Exception {      super.doPost(request, response);      return null;    }    //    @Override//    protected String readContent(HttpServletRequest request)//      throws ServletException, IOException {//      // HACK//      String result = TestThreadLocal.getPayload();//      if (result == null) {//        result = super.readContent(request);//      }//      TestThreadLocal.setPayload(null);//      return result;//    }}