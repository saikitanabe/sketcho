<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>hibernate4gwt - The Hibernate-GWT type issue</title>


  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

  <style type="text/css">
<!--
a:link { color: #FFFFFF; text-decoration: none}
a:visited { text-decoration: none; color: #FFCC66}
a:hover { color: #99CCFF; text-decoration: underline}
body { font-family: "Arial", "Helvetica", "sans-serif"}
-->
  </style>
</head>


<body style="background-color: rgb(255, 255, 255);" link="#ffffff">

<table align="center" background="image/top.gif" border="0" cellpadding="0" cellspacing="0" height="75" width="700">

  <tbody>

    <tr background="image/top.gif">

      <td colspan="1">
      <table style="text-align: left; width: 100%;" border="0" cellpadding="0" cellspacing="0">

        <tbody>

          <tr>

            <td><font face="Tahoma" size="6">hibernate4gwt</font>
            <pre><font face="Tahoma">http://hibernate4gwt.sourceforge.net</font></pre>

            </td>

            <td style="text-align: right;">hosted by<br>

            <a href="http://sourceforge.net/"><img style="width: 125px; height: 37px;" src="http://sflogo.sourceforge.net/sflogo.php?group_id=194811&amp;type=2" alt="SourceForge.net Logo" border="0"></a></td>

          </tr>

        </tbody>
      </table>

      </td>

    </tr>

  </tbody>
</table>

<table align="center" border="0" cellpadding="0" cellspacing="0" height="20" width="700">

  <tbody>

    <tr bgcolor="#000000">

      <td bgcolor="#336666">
      <div align="center"> <font color="#ffffff" face="Tahoma">|<font face="Tahoma"> <a href="index.html">Home</a> | <a href="news.html">News</a>
| <a href="getting_started.html">Getting started</a>
| <a href="overview.html">Overview</a> | <a href="hibernate_gwt_problem.html">Hibernate-GWT issues</a>
| <a href="faq.html">FAQ</a> | <a href="thanks.html">Thanks</a> | </font></font></div>

      </td>

    </tr>

  </tbody>
</table>

<table align="center" background="image/top1.gif" border="0" cellpadding="0" cellspacing="0" height="13" width="700">

  <tbody>

    <tr>

      <td><font face="Tahoma"><img src="image/pixel.gif" height="1" width="1"></font></td>

    </tr>

  </tbody>
</table>

<font face="Tahoma"><br>

</font>
<table align="center" border="0" cellpadding="0" cellspacing="0" width="700">

  <tbody>

    <tr>

      <td valign="top" width="455">
      <table background="image/longmenu.gif" border="0" cellpadding="0" cellspacing="0" height="34" width="455">

        <tbody>

          <tr>

            <td><b><font face="Tahoma">The
Hibernate-GWT type issue</font></b></td>

          </tr>

        </tbody>
      </table>
      <br>

      <table style="width: 100%; text-align: left; margin-left: auto; margin-right: auto;" border="1" cellpadding="0" cellspacing="0">

        <tbody>

          <tr>

            <td style="text-align: center;"><span style="font-weight: bold; color: rgb(255, 0, 0);">Note : this issue is now
solved by GWT 1.5 and only concerns previous releases.</span></td>

          </tr>

        </tbody>
      </table>

      <p class="MsoNormal"><span style="" lang="EN-GB"><span style="font-weight: bold;">The
problem</span><o:p></o:p></span></p>

      <p class="MsoNormal"><span style="" lang="EN-GB">Hibernate replaces some basic Java types
with various subclassed implementation &nbsp;:</span></p>

      <ul>

        <li><span style="" lang="EN-GB">java.util.Date
can be replaced with java.sql.Date or java.sql.Timestamp</span></li>

        <li><span style="" lang="EN-GB">List
is implemented by Hibernate's PersistentList</span></li>

        <li><span style="" lang="EN-GB">Set
&nbsp;is implemented by Hibernate's PersistentSet<br>

          </span></li>

      </ul>

      <p class="MsoNormal"><span style="" lang="EN-GB">Nevertheless,&nbsp;</span><span style="" lang="EN-GB">Javascript serialization of
these classes&nbsp;fails, since they do not belong to the JRE
emulation supported by GWT.</span></p>

      <p class="MsoNormal"><span style="" lang="EN-GB">The easiest way to solve this issue if to
convert back the Hibernate types to the JRE ones.&nbsp;</span></p>

      <p class="MsoNormal"><span style="" lang="EN-GB"><a style="color: rgb(0, 0, 153);" href="http://dozer.sourceforge.net/">Dozer</a> and <a style="color: rgb(0, 0, 153);" href="http://beanlib.sourceforge.net">BeanLib</a> do
it well (hibernate4gwt too, since it uses BeanLib :) )... except for
java.sql.Timestamp !</span></p>

      <p class="MsoNormal"><span style="" lang="EN-GB"><span style="font-weight: bold;">Timestamp
case</span></span></p>

      <p class="MsoNormal"><span style="" lang="EN-GB">As specified in the associated <a style="color: rgb(0, 0, 153);" href="http://java.sun.com/j2se/1.4.2/docs/api/java/sql/Timestamp.html">JavaDoc</a>
:</span></p>

      <p><span style="font-style: italic;" lang="EN-GB">"</span><b style="font-style: italic;">Note:</b><span style="font-style: italic;"> This type is a composite of a </span><code style="font-style: italic;">java.util.Date</code><span style="font-style: italic;"> and a separate nanoseconds
value[...]</span> </p>

      <p style="font-style: italic;" class="MsoNormal">Due
to the differences between the <code>Timestamp</code>
class and the <code>java.util.Date</code> class mentioned
above, it is recommended that code not view <code>Timestamp</code>
values generically as an instance of <code>java.util.Date</code>.
The inheritance relationship between <code>Timestamp</code>
and <code>java.util.Date</code> really denotes
implementation inheritance, and not type inheritance.<span style="" lang="EN-GB">"</span></p>

      <span style="" lang="EN-GB">The fact is that
Hibernate <span style="font-weight: bold;">does </span>consider
Timestamp as a type inheritance of Date, but GWT don't.</span><br>

      <span style="" lang="EN-GB"><br>

Hopefully, since release 0.5, hibernate4gwt supports native
java.sql.Timestamp both for clone and merge and adds JSNI port of this
class (and java.sql.Date too), so usage of Timestamp is not an issue
anymore.</span><span style="" lang="EN-GB"></span><br>

      <span style="" lang="EN-GB"></span></td>

    </tr>

  </tbody>
</table>

<font face="Tahoma"><br>

</font>
<table align="center" border="0" cellpadding="0" cellspacing="0" width="700">

  <tbody>

    <tr>

      <td>
      <div align="left"></div>

      <div align="center"><font face="Tahoma" size="2">Copyright 2007. All Rights Reserved</font></div>

      <table align="center" border="0" cellpadding="0" cellspacing="0" height="20" width="700">

        <tbody>

          <tr align="center" bgcolor="#000000">

            <td bgcolor="#336666">&nbsp;<small><span style="color: rgb(255, 255, 255);">Last updated : 1 June,
2007</span></small></td>

          </tr>

        </tbody>
      </table>

      </td>

    </tr>

  </tbody>
</table>

<center>&nbsp;</center>

<br>

<br>

</body>
</html>
